<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="LayoutPadrao">
<head>
    <title>Lista de Clientes</title>
    <meta charset="utf-8" />
</head>
<body>
    <section layout:fragment="conteudo">
      <div class="container">
         <div class="panel panel-success" style="margin-top: 0cm; margin-bottom: 2cm">
            <div class="panel panel-heading">
               <h2 class="panel-title" style="text-align: center"><strong>Clientes Cadastrados</strong></h2>
            </div>
          <form class="form-inline" style="text-align: center" th:action="@{/cliente/busca}" th:object="${cliente}">
           <div class="input-group">
                        <input class="form-control" type="text" style="width: 350px" name="nomeFantasia" placeholder="Pesquisar cliente por nome"></input>
                        <span class="input-group-btn">
                        <button type="submit" class="btn btn-default">
                        <span class="glyphicon glyphicon-search"></span>
                        </button>
                        </span>
                     </div>
			</form>
            <div class="panel-body">
               <div class="table-responsive">
               <table class="table table-striped table-bordered" id="tabela">
                  <thead>
                     <tr>
                        <th>Id</th>
                        <th>Nome Fantasia</th>
                        <th>Razão Social</th>
                        <th>CNPJ</th>
                        <th>Telefone</th>
                        <th>Email</th>
                        <th>Contato</th>
                        <th colspan="3">Opções</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr th:each="cliente : ${clientes}">
                        <td th:text="${cliente.idCliente}" id="idCliente"></td>
                        <td th:text="${cliente.nomeFantasia}"></td>
                        <td th:text="${cliente.razaoSocial}"></td>
                        <td th:text="${cliente.cnpj}"></td>
                        <td th:text="${cliente.telefone}"></td>
                        <td th:text="${cliente.email}"></td>
                        <td th:text="${cliente.contatoCliente != null ?  cliente.contatoCliente.nomeContato : ''}"></td>
                        <td><a th:href="@{/cliente/lista/{idCliente}(idCliente=${cliente.idCliente})}">Detalhes</a></td>
                        <td><a th:href="@{#}">Editar</a></td>
                        <td><a th:href="@{#}">Deletar</a></td>
                     </tr>
                  </tbody>
               </table>
            </div>
               <br></br> 
               <a th:href="@{#}" id="exporta" style="float: right">Exportar resultados para Excel</a>
               <a th:href="@{/cliente/cadastra}">Voltar para cadastro de clientes</a>
            </div>
         </div>
      </div>
      </section>
       <th:block layout:fragment="javascript-extra">
      <script src="/javascript/exportaexcel.js"></script>
      </th:block>
   </body>
</html>