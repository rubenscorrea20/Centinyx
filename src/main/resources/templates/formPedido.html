<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="LayoutPadrao">
   <head>
      <meta charset="utf-8" />
      <title>Cadastro de Pedido</title>
   </head>
   <body onstorage="setaMotoboy()" onload="setaMotoboy()">
      <section layout:fragment="conteudo">
         <div class="container">
            <div class="panel panel-primary" style="margin-top: 0cm; margin-bottom: 1cm">
               <div class="panel panel-heading">
                  <h2 class="panel-title" style="text-align: center"><strong>Cadastro do Pedido</strong>
                  </h2>
               </div>
               <div class="panel-body">
                  <form id="formPedido" th:object="${pedido}" th:action="@{/pedido/salva}" method="POST" class="form-group">
                     <div class="alert  alert-danger  alert-dismissible" role="alert" th:if="${#fields.hasAnyErrors()}">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                        <th:block th:each="erro : ${#fields.detailedErrors()}">
                           <div>
                              <i class="fa  fa-exclamation-circle"></i>
                              <span th:text="${erro.message}"></span>
                           </div>
                        </th:block>
                     </div>
                     <div class="container">
                        <fieldset style="max-width: 28.5cm">
                           <legend>Dados do Pedido</legend>
                           <div class="col-sm-5">
                              <div class="form-group" th:classappend="${#fields.hasErrors('numeroPedido')} ? has-error">
                                 <label for="numeroPedido">Numero do Pedido:</label>
                                 <input id="numeroPedido" type="text" class="form-control" readonly="readonly" style="width: 250px"></input>
                              </div>
                              <div class="form-group">
                                 <label for="nomeCliente">Cliente:</label>
                                 <div class="input-group">
                                    <input id="nomeCliente" type="text" class="form-control" name="login" style="width: 350px" readonly="readonly"></input>
                                    <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" id="buscaCliente">Buscar cliente</button>
                                    </span>
                                 </div>
                              </div>
                              <div class="form-group">
                                 <label for="sexo">Tipo do Pedido:</label>
                                 <select class="custom-select form-control" name="tipoPedido" th:field="*{tipoPedido}" style="width: 210px">
                                    <option th:each="tipoPedido : ${T(centinyx.enums.TipoPedidoEnum).values()}"
                                       th:value="${tipoPedido}" th:text="${tipoPedido}">
                                    </option>
                                 </select>
                              </div>
                              <div class="form-group">
                                 <label id="criaEscala">Criar ou acessar o calendário de escalas</label>
                              </div>
                              <p></p>
                              <div class="form-group">
                                 <div class="calendar" id="calendar"></div>
                              </div>
                           </div>
                        </fieldset>
                        <br></br>
                        <div style="text-align:center;" class="col-sm-11">
                           <button type="reset" class="btn btn-warning">Limpar dados</button>
                           <button type="button" class="btn btn-primary" id="enviar">Enviar dados</button>
                        </div>
                     </div>
                  </form>
               </div>
            </div>
         </div>
         <!-- Modal -->
         <form id="formAlocacao" th:object="${alocacao}" th:action="@{/pedido/alocacao/salva}" method="POST" class="form-group">
         <div class="modal fade" id="modalCalendar">
            <div class="container">
               <div class="modal-dialog">
                  <!-- Modal content-->
                  <div class="modal-content">
                     <div class="modal-header">
                        <button type="button" class="close" id="fechaAlocacao" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Nova Alocação</h4>
                     </div>
                     <div class="modal-body">
                        <div class="form-group">
                           <label for="dataAlocacao">Data da Alocação:</label>
                           <input type="text" th:field="*{dataAlocacao}" id="dataAlocacao" readonly="readonly" style="width: 130px" class="form-control"></input>
                        </div>
                        <div class="form-group">
                           <label for="periodo">Periodo:</label>
                                 <select id="periodo" class="custom-select form-control" name="tipoPeriodo" style="width: 210px">
                                    <option th:each="tipoPeriodo : ${T(centinyx.enums.TipoPeriodoEnum).values()}"
                                       th:value="${tipoPeriodo}" th:text="${tipoPeriodo}">
                                    </option>
                                 </select>
                        </div>
                        <div class="form-group">
                           <label for="qtdeMotoboy">Quantidade de Motoboys: </label>
                           <input type="text" id="qtdeMotoboy" th:field="*{quantidadeMotoboy}" style="width: 80px" th:onchange="'javascript:acrescentaMotoboy();'" class="form-control"></input>
                        </div>
                        <div class="form-inline" id="container"></div>   
                     </div>
                     <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal" id="cancelaAlocacao">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="confirmaAlocacao">Confirmar</button>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         </form>
      </section>
      <th:block layout:fragment="javascript-extra">
      	 <script src="/javascript/buscadados.js"></script>
         <script src="/javascript/mathRandom.js"></script>
         <script src="/javascript/calendarioEscalas.js"></script>
         <script src="/javascript/redirectViews.js"></script>
         <script src="/javascript/acrescentaMotoboys.js"></script>
      </th:block>
   </body>
</html>